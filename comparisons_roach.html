<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roach Rage</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Creepster&family=Quicksand:wght@700&display=swap');
        
        body, html { 
            margin: 0; padding: 0; 
            font-family: 'Quicksand', sans-serif; 
            background: #020617; 
            height: 100dvh; 
            overflow: hidden; 
            touch-action: manipulation;
        }
        
        h1, h2, .score-font { font-family: 'Creepster', cursive; }

        .game-area {
            position: relative;
            width: 100%;
            height: 45vh;
            background: #0f172a;
            border: 4px solid #1e293b;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.9);
        }

        .cockroach {
            position: absolute;
            font-size: 32px;
            transition: all 0.6s ease-in-out;
            z-index: 30;
            user-select: none;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.8));
        }

        .splat-stain {
            position: absolute;
            z-index: 5;
            pointer-events: none;
            filter: blur(3px);
            opacity: 0.75;
            border-radius: 40% 60% 70% 30% / 40% 40% 60% 50%;
        }

        .dead-roach {
            position: absolute;
            font-size: 35px;
            z-index: 10;
            pointer-events: none;
            transform: translate(-50%, -50%) scaleY(0.25) scaleX(1.4);
            filter: grayscale(0.4) brightness(0.5) sepia(0.8);
            opacity: 0.8;
        }

        .input-field { text-transform: lowercase; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const QUESTIONS = [
            { p: "This car is ___ than that one. (fast)", a: "faster" },
            { p: "It's the ___ car in the race. (fast)", a: "fastest" },
            { p: "London is ___ than my village. (big)", a: "bigger" },
            { p: "Tokyo is the ___ city. (big)", a: "biggest" },
            { p: "Ice is ___ than water. (cold)", a: "colder" },
            { p: "Antarctica is the ___ place. (cold)", a: "coldest" },
            { p: "The sun is ___ than the moon. (hot)", a: "hotter" },
            { p: "July is the ___ month. (hot)", a: "hottest" },
            { p: "A giraffe is ___ than a horse. (tall)", a: "taller" },
            { p: "He is the ___ boy in class. (tall)", a: "tallest" },
            { p: "This box is ___ than that one. (small)", a: "smaller" },
            { p: "It's the ___ gift here. (small)", a: "smallest" },
            { p: "This rope is ___ than yours. (long)", a: "longer" },
            { p: "This is the ___ movie ever. (long)", a: "longest" },
            { p: "My dad is ___ than my uncle. (old)", a: "older" },
            { p: "That is the ___ tree. (old)", a: "oldest" },
            { p: "This wall is ___ than that one. (low)", a: "lower" },
            { p: "The price is at its ___ point. (low)", a: "lowest" },
            { p: "A plane flies ___ than a bird. (high)", a: "higher" },
            { p: "That is the ___ mountain. (high)", a: "highest" },
            { p: "Steel is ___ than wood. (hard)", a: "harder" },
            { p: "This is the ___ test. (hard)", a: "hardest" },
            { p: "Silk is ___ than cotton. (soft)", a: "softer" },
            { p: "This is the ___ pillow. (soft)", a: "softest" },
            { p: "Your bike is ___ than mine. (new)", a: "newer" },
            { p: "This is the ___ model. (new)", a: "newest" },
            { p: "The lake is ___ than the pool. (deep)", a: "deeper" },
            { p: "It's the ___ part of the sea. (deep)", a: "deepest" },
            { p: "The wind is ___ today. (strong)", a: "stronger" },
            { p: "He is the ___ man. (strong)", a: "strongest" },
            { p: "This shirt is ___ than that. (clean)", a: "cleaner" },
            { p: "It's the ___ kitchen. (clean)", a: "cleanest" },
            { p: "The street is ___ than ours. (wide)", a: "wider" },
            { p: "It's the ___ river. (wide)", a: "widest" },
            { p: "I am ___ than my brother. (young)", a: "younger" },
            { p: "She is the ___ student. (young)", a: "youngest" },
            { p: "The night is ___ than the day. (dark)", a: "darker" },
            { p: "This is the ___ room. (dark)", a: "darkest" },
            { p: "This pen is ___ than that. (short)", a: "shorter" },
            { p: "He is the ___ in class. (short)", a: "shortest" },
            { p: "Today is ___ than yesterday. (warm)", a: "warmer" },
            { p: "It's the ___ day of spring. (warm)", a: "warmest" },
            { p: "This bag is ___ than that. (light)", a: "lighter" },
            { p: "It's the ___ box. (light)", a: "lightest" },
            { p: "This knife is ___ than that. (sharp)", a: "sharper" },
            { p: "It is the ___ blade. (sharp)", a: "sharpest" },
            { p: "That wall is ___ than this. (thick)", a: "thicker" },
            { p: "It is the ___ book. (thick)", a: "thickest" },
            { p: "History is ___ than math. (interesting)", a: "more interesting" },
            { p: "This is the ___ book ever. (interesting)", a: "most interesting" },
            { p: "Gold is ___ than silver. (expensive)", a: "more expensive" },
            { p: "This is the ___ watch here. (expensive)", a: "most expensive" },
            { p: "A Ferrari is ___ than a Fiat. (beautiful)", a: "more beautiful" },
            { p: "She is the ___ girl. (beautiful)", a: "most beautiful" },
            { p: "This task is ___ than that. (difficult)", a: "more difficult" },
            { p: "It's the ___ exam. (difficult)", a: "most difficult" },
            { p: "Dogs are ___ than fish. (intelligent)", a: "more intelligent" },
            { p: "He is the ___ boy. (intelligent)", a: "most intelligent" },
            { p: "Health is ___ than money. (important)", a: "more important" },
            { p: "This is the ___ rule. (important)", a: "most important" },
            { p: "This sofa is ___ than that. (comfortable)", a: "more comfortable" },
            { p: "It's the ___ bed. (comfortable)", a: "most comfortable" },
            { p: "Lions are ___ than sheep. (dangerous)", a: "more dangerous" },
            { p: "It's the ___ snake. (dangerous)", a: "most dangerous" },
            { p: "A city is ___ than a farm. (exciting)", a: "more exciting" },
            { p: "It was the ___ trip. (exciting)", a: "most exciting" },
            { p: "Nature is ___ than a room. (wonderful)", a: "more wonderful" },
            { p: "It's the ___ view. (wonderful)", a: "most wonderful" },
            { p: "My phone is ___ than yours. (expensive)", a: "more expensive" },
            { p: "That was the ___ meal. (expensive)", a: "most expensive" },
            { p: "Science is ___ than art. (complicated)", a: "more complicated" },
            { p: "This is the ___ puzzle. (complicated)", a: "most complicated" },
            { p: "He is ___ than his friend. (generous)", a: "more generous" },
            { p: "She is the ___ person. (generous)", a: "most generous" },
            { p: "The show was ___ than the last. (spectacular)", a: "more spectacular" },
            { p: "It was the ___ event. (spectacular)", a: "most spectacular" },
            { p: "A nurse is ___ than me. (experienced)", a: "more experienced" },
            { p: "He is the ___ doctor. (experienced)", a: "most experienced" },
            { p: "This story is ___ than that. (incredible)", a: "more incredible" },
            { p: "It's the ___ tale. (incredible)", a: "most incredible" },
            { p: "The food is ___ than before. (delicious)", a: "more delicious" },
            { p: "This is the ___ pizza. (delicious)", a: "most delicious" },
            { p: "A storm is ___ than rain. (frightening)", a: "more frightening" },
            { p: "It's the ___ dream. (frightening)", a: "most frightening" },
            { p: "The tool is ___ than a knife. (effective)", a: "more effective" },
            { p: "It's the ___ way. (effective)", a: "most effective" },
            { p: "Birds are ___ than bears. (colorful)", a: "more colorful" },
            { p: "It's the ___ bird. (colorful)", a: "most colorful" },
            { p: "She is ___ than her sister. (ambitious)", a: "more ambitious" },
            { p: "He is the ___ leader. (ambitious)", a: "most ambitious" },
            { p: "This chair is ___ than that. (adjustable)", a: "more adjustable" },
            { p: "It's the ___ seat. (adjustable)", a: "most adjustable" },
            { p: "The forest is ___ than the park. (mysterious)", a: "more mysterious" },
            { p: "It's the ___ place. (mysterious)", a: "most mysterious" },
            { p: "His car is ___ than mine. (economical)", a: "more economical" },
            { p: "It's the ___ choice. (economical)", a: "most economical" },
            { p: "This vase is ___ than that. (delicate)", a: "more delicate" },
            { p: "It's the ___ object. (delicate)", a: "most delicate" }
        ];

        const App = () => {
            const [phase, setPhase] = useState('START');
            const [timeLeft, setTimeLeft] = useState(180);
            const [score, setScore] = useState(0);
            const [currentQ, setCurrentQ] = useState(null);
            const [input, setInput] = useState("");
            const [roaches, setRoaches] = useState([]);
            const [splats, setSplats] = useState([]);
            const [questionPool, setQuestionPool] = useState([]);
            const inputRef = useRef(null);

            useEffect(() => {
                if (phase === 'PLAY') {
                    setQuestionPool([...QUESTIONS]);
                    
                    const initialRoaches = Array.from({ length: 50 }, (_, i) => ({
                        id: i,
                        x: Math.random() * 90 + 5,
                        y: Math.random() * 90 + 5,
                        rotation: Math.random() * 360
                    }));
                    setRoaches(initialRoaches);

                    const timer = setInterval(() => {
                        setTimeLeft(p => {
                            if (p <= 1) { setPhase('END'); return 0; }
                            return p - 1;
                        });

                        setRoaches(prev => prev.map(r => ({
                            ...r,
                            x: Math.max(5, Math.min(95, r.x + (Math.random() - 0.5) * 40)),
                            y: Math.max(5, Math.min(95, r.y + (Math.random() - 0.5) * 40)),
                            rotation: r.rotation + (Math.random() - 0.5) * 120
                        })));
                    }, 700);

                    return () => clearInterval(timer);
                }
            }, [phase]);

            useEffect(() => {
                if (phase === 'PLAY' && questionPool.length > 0 && !currentQ) {
                    nextQuestion(questionPool);
                }
            }, [phase, questionPool]);

            const nextQuestion = (currentPool) => {
                let activePool = currentPool || questionPool;
                if (activePool.length === 0) activePool = [...QUESTIONS];
                const randomIndex = Math.floor(Math.random() * activePool.length);
                const selectedQ = activePool[randomIndex];
                const newPool = activePool.filter((_, i) => i !== randomIndex);
                setQuestionPool(newPool);
                setCurrentQ(selectedQ);
                setInput("");
                inputRef.current?.focus();
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (input.toLowerCase().trim() === currentQ.a.toLowerCase()) {
                    const victimIndex = Math.floor(Math.random() * roaches.length);
                    const victim = roaches[victimIndex];
                    const newSplat = {
                        id: Date.now(),
                        x: victim.x,
                        y: victim.y,
                        rotation: victim.rotation,
                        size: 45 + Math.random() * 35,
                        color: ['#4b5320', '#3f301d', '#2d3300', '#5c4010'][Math.floor(Math.random()*4)]
                    };
                    setSplats(prev => [...prev, newSplat]);
                    setScore(s => s + 1);
                    setRoaches(prev => {
                        const next = [...prev];
                        next[victimIndex] = { ...victim, id: Date.now()+1, x: Math.random()*90, y: Math.random()*90 };
                        return next;
                    });
                    nextQuestion();
                } else {
                    setInput("");
                }
            };

            return (
                <div className="flex flex-col items-center justify-between h-full w-full p-4 max-w-4xl mx-auto text-white">
                    {/* Header Bar */}
                    <div className="w-full flex justify-between items-center mb-2">
                        <a href="pronouns.html" className="bg-slate-800 hover:bg-slate-700 text-lime-500 px-4 py-2 rounded-xl font-bold transition-colors border border-lime-900/50">
                            ‚Üê Back
                        </a>
                        <h1 className="text-4xl text-lime-500 tracking-tighter">ROACH RAGE</h1>
                        <div className="w-16"></div>
                    </div>

                    {phase === 'PLAY' && (
                        <div className="flex flex-col items-center w-full flex-1 justify-center gap-4">
                            <div className="flex justify-between items-center w-full px-4">
                                <div className="score-font text-5xl text-lime-400 drop-shadow-lg">SQUASHED: {score}</div>
                                <div className="bg-red-600 px-6 py-1 rounded-full font-bold border-b-4 border-red-900 shadow-xl">
                                    {Math.floor(timeLeft / 60)}:{(timeLeft % 60).toString().padStart(2, '0')}
                                </div>
                            </div>
                            
                            <div className="game-area">
                                {splats.map(s => (
                                    <React.Fragment key={s.id}>
                                        <div className="splat-stain" style={{ 
                                            left: `${s.x}%`, top: `${s.y}%`, 
                                            width: s.size, height: s.size * 0.7,
                                            background: s.color,
                                            transform: `translate(-50%, -50%) rotate(${s.rotation}deg)` 
                                        }} />
                                        <div className="dead-roach" style={{ left: `${s.x}%`, top: `${s.y}%`, transform: `translate(-50%, -50%) rotate(${s.rotation}deg)` }}>
                                            ü™≥
                                        </div>
                                    </React.Fragment>
                                ))}
                                {roaches.map(r => (
                                    <div key={r.id} className="cockroach" style={{ left: `${r.x}%`, top: `${r.y}%`, transform: `translate(-50%, -50%) rotate(${r.rotation}deg)` }}>
                                        ü™≥
                                    </div>
                                ))}
                            </div>

                            <form onSubmit={handleSubmit} className="w-full bg-slate-900 p-6 rounded-3xl border-2 border-slate-700 shadow-2xl">
                                <p className="text-xl text-center text-slate-200">
                                    {currentQ?.p.split("___")[0]}
                                    <input 
                                        ref={inputRef} 
                                        className="input-field mx-2 border-b-4 border-lime-500 bg-black w-full md:w-80 text-center outline-none py-2 text-lime-400 font-black block md:inline-block mt-4 md:mt-0 rounded-t-lg shadow-inner" 
                                        value={input} 
                                        onChange={(e) => setInput(e.target.value)} 
                                        autoComplete="off" 
                                    />
                                    {currentQ?.p.split("___")[1]}
                                </p>
                            </form>
                        </div>
                    )}

                    {phase === 'START' && (
                        <div className="bg-slate-900 p-12 rounded-[50px] text-center border-b-[12px] border-lime-800 my-auto shadow-2xl max-w-md">
                            <div className="text-8xl mb-6">ü™≥</div>
                            <h2 className="text-5xl mb-4 text-lime-400 uppercase tracking-tighter">Infestation</h2>
                            <p className="mb-10 text-slate-400 font-bold">The classroom is infested with roaches. Type the correct answers to squash them. You have 3 Minutes.</p>
                            <button onClick={() => setPhase('PLAY')} className="bg-lime-600 hover:bg-lime-500 text-slate-950 font-black text-2xl px-16 py-5 rounded-2xl w-full transition-all active:scale-95 shadow-xl">START SQUASHING</button>
                        </div>
                    )}

                    {phase === 'END' && (
                        <div className="bg-slate-900 p-12 rounded-[50px] text-center border-t-[12px] border-red-600 my-auto shadow-2xl">
                            <h2 className="text-6xl font-black mb-4 text-red-600">TIME'S UP!</h2>
                            <div className="bg-black/50 p-8 rounded-3xl mb-10">
                                <p className="text-slate-400 uppercase tracking-widest text-sm mb-2">Total Squashed</p>
                                <p className="text-9xl font-black text-lime-500 score-font">{score}</p>
                            </div>
                            <button onClick={() => window.location.reload()} className="bg-white text-black px-12 py-5 rounded-2xl font-black w-full uppercase text-xl hover:bg-slate-200 transition-colors">START NEW ROUND</button>
                        </div>
                    )}

                    <div className="text-[10px] text-slate-700 font-bold uppercase tracking-[0.4em] text-center mt-4">
                        ¬© Mister Seb's Grammar Apps, 2026
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
